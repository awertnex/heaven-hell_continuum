#include "h/math.h"

f32 clamp_f32(f32 val, f32 min, f32 max)
{
    return ((val < min) ? min : ((val > max) ? max : val));
}

f64 clamp_f64(f64 val, f64 min, f64 max)
{
    return ((val < min) ? min : ((val > max) ? max : val));
}

m4f32 matrix_add(m4f32 a, m4f32 b)
{
    return (m4f32){
        ((a.a11) + (b.a11)), ((a.a12) + (b.a12)), ((a.a13) + (b.a13)), ((a.a14) + (b.a14)),
            ((a.a21) + (b.a21)), ((a.a22) + (b.a22)), ((a.a23) + (b.a23)), ((a.a24) + (b.a24)),
            ((a.a31) + (b.a31)), ((a.a32) + (b.a32)), ((a.a33) + (b.a33)), ((a.a34) + (b.a34)),
            ((a.a41) + (b.a41)), ((a.a42) + (b.a42)), ((a.a43) + (b.a43)), ((a.a44) + (b.a44)),
    };
}

m4f32 matrix_subtract(m4f32 a, m4f32 b)
{
    return (m4f32){
        ((a.a11) - (b.a11)), ((a.a12) - (b.a12)), ((a.a13) - (b.a13)), ((a.a14) - (b.a14)),
            ((a.a21) - (b.a21)), ((a.a22) - (b.a22)), ((a.a23) - (b.a23)), ((a.a24) - (b.a24)),
            ((a.a31) - (b.a31)), ((a.a32) - (b.a32)), ((a.a33) - (b.a33)), ((a.a34) - (b.a34)),
            ((a.a41) - (b.a41)), ((a.a42) - (b.a42)), ((a.a43) - (b.a43)), ((a.a44) - (b.a44)),
    };
}

m4f32 matrix_multiply(m4f32 a, m4f32 b)
{
    return (m4f32){
        ((a.a11) * (b.a11)) + ((a.a12) * (b.a21)) + ((a.a13) * (b.a31)) + ((a.a14) * (b.a41)),
            ((a.a11) * (b.a12)) + ((a.a12) * (b.a22)) + ((a.a13) * (b.a32)) + ((a.a14) * (b.a42)),
            ((a.a11) * (b.a13)) + ((a.a12) * (b.a23)) + ((a.a13) * (b.a33)) + ((a.a14) * (b.a43)),
            ((a.a11) * (b.a14)) + ((a.a12) * (b.a24)) + ((a.a13) * (b.a34)) + ((a.a14) * (b.a44)),

            ((a.a21) * (b.a11)) + ((a.a22) * (b.a21)) + ((a.a23) * (b.a31)) + ((a.a24) * (b.a41)),
            ((a.a21) * (b.a12)) + ((a.a22) * (b.a22)) + ((a.a23) * (b.a32)) + ((a.a24) * (b.a42)),
            ((a.a21) * (b.a13)) + ((a.a22) * (b.a23)) + ((a.a23) * (b.a33)) + ((a.a24) * (b.a43)),
            ((a.a21) * (b.a14)) + ((a.a22) * (b.a24)) + ((a.a23) * (b.a34)) + ((a.a24) * (b.a44)),

            ((a.a31) * (b.a11)) + ((a.a32) * (b.a21)) + ((a.a33) * (b.a31)) + ((a.a34) * (b.a41)),
            ((a.a31) * (b.a12)) + ((a.a32) * (b.a22)) + ((a.a33) * (b.a32)) + ((a.a34) * (b.a42)),
            ((a.a31) * (b.a13)) + ((a.a32) * (b.a23)) + ((a.a33) * (b.a33)) + ((a.a34) * (b.a43)),
            ((a.a31) * (b.a14)) + ((a.a32) * (b.a24)) + ((a.a33) * (b.a34)) + ((a.a34) * (b.a44)),

            ((a.a41) * (b.a11)) + ((a.a42) * (b.a21)) + ((a.a43) * (b.a31)) + ((a.a44) * (b.a41)),
            ((a.a41) * (b.a12)) + ((a.a42) * (b.a22)) + ((a.a43) * (b.a32)) + ((a.a44) * (b.a42)),
            ((a.a41) * (b.a13)) + ((a.a42) * (b.a23)) + ((a.a43) * (b.a33)) + ((a.a44) * (b.a43)),
            ((a.a41) * (b.a14)) + ((a.a42) * (b.a24)) + ((a.a43) * (b.a34)) + ((a.a44) * (b.a44)),
    };
}

v4f32 matrix_multiply_vector(m4f32 a, v4f32 b)
{
    return (v4f32){
        ((a.a11) * (b.x)) + ((a.a12) * (b.x)) + ((a.a13) * (b.x)) + ((a.a14) * (b.x)),
            ((a.a21) * (b.y)) + ((a.a22) * (b.y)) + ((a.a23) * (b.y)) + ((a.a24) * (b.y)),
            ((a.a31) * (b.z)) + ((a.a32) * (b.z)) + ((a.a33) * (b.z)) + ((a.a34) * (b.z)),
            ((a.a41) * (b.w)) + ((a.a42) * (b.w)) + ((a.a43) * (b.w)) + ((a.a44) * (b.w)),
    };
}

